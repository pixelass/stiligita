{"version":3,"sources":["../src/index.js"],"names":["hashCode","s","split","reduce","a","b","charCodeAt","shortid","createStyleBlock","Object","keys","map","key","join","replace","Styled","__STYLES__","STYLE_TAG","document","createElement","head","appendChild","styled","forEach","domElement","_","createComponent","createClassName","id","pString","encode","Math","abs","args","strings","shift","css","component","p","pp","children","JSON","stringify","str","i","dynamic","addon","className","innerHTML","match"],"mappings":"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","file":"index.js","sourcesContent":["import {createElement} from 'react'\nimport Abcq from 'abcq'\nimport uuid from 'uuid/v4'\nimport htmlElementAttributes from 'html-element-attributes'\nimport domElements from './dom-elements'\n\nconst hashCode = (s) =>{\n  return s.split('').reduce((a,b) => {\n    a = ((a << 5) - a) + b.charCodeAt(0)\n    return a & a\n  }, 0)\n}\n\nconst shortid = new Abcq()\n\nconst createStyleBlock = s => Object.keys(s).map(key => {\n  return `.${key.split(':')[0] + '{'}${s[key]}${'}'}`\n}).join('').replace(/\\s+/g, ' ')\n\nclass Styled {\n  constructor() {\n    this.__STYLES__ = {}\n    this.STYLE_TAG = document.createElement('style')\n  }\n\n  init() {\n    document.head.appendChild(this.STYLE_TAG)\n  }\n}\n\nconst styled = new Styled()\n\ndomElements.forEach(domElement => {\n  styled[domElement] = (..._) => createComponent(_, {domElement})\n})\n\nconst createClassName = (id, pString) => {\n  return shortid.encode(Math.abs(hashCode(id + pString)))\n}\n\nconst createComponent = (args, {domElement}) => {\n  const [strings] = args\n  args.shift()\n  let css\n  let id = uuid()\n  const component = (p) => {\n    const pp = {...p, children: null}\n    const pString = JSON.stringify(pp)\n    css = strings.map((str, i) => {\n      const dynamic = args[i] || ''\n      let addon = dynamic\n      if (typeof dynamic === 'function') {\n        addon = dynamic(p) || ''\n      }\n      return `${str}${addon}`\n    }).join('').replace(/\\n+/,'\\n')\n    const className = createClassName(id, pString)\n    styled.__STYLES__[className] = css\n    if (!STYLE_TAG.innerHTML.match(`.${className} {`)) {\n      styled.STYLE_TAG.innerHTML = createStyleBlock(styled.__STYLES__)\n    }\n    return createElement(domElement, {...p})\n  }\n  return component\n}\n\nexport default styled\n"]}